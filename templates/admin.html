<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nhân viên - Hệ thống quản lý dịch vụ khách hàng</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/main.css">
    <style>
        .main-content { display: flex; gap: 20px; margin-top: 2rem; }
        .request-list-container { flex: 1; }
        .request-detail-container { flex: 2; display: none; } /* Ẩn ban đầu */
        .request-item { cursor: pointer; margin-bottom: 10px; padding: 10px; border: 1px solid #eee; border-radius: 4px; transition: background-color 0.2s; }
        .request-item:hover { background-color: #f9f9f9; }
        .request-item.active { background-color: var(--primary-color); color: white; }
        .request-detail-card .form-group { margin-bottom: 0.8rem; }
        .history-table th, .history-table td { padding: 0.5rem; }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">Hệ thống Dịch vụ Khách hàng (Nhân viên)</div>
            <div>
                <span id="user-info" style="margin-right: 15px;"></span>
                <button class="btn btn-danger btn-sm" onclick="logout()">Đăng xuất</button>
            </div>
        </div>
    </header>

    <main class="container main-content">
        <div class="request-list-container card">
            <div class="card-header">
                <h2>Danh sách yêu cầu</h2>
                <button class="btn btn-sm" onclick="fetchRequests()">Tải lại</button>
            </div>
            <div class="card-body">
                <div class="form-group">
                    <label for="filter-status">Lọc theo trạng thái:</label>
                    <select id="filter-status" onchange="fetchRequests()">
                        <option value="">Tất cả</option>
                        <option value="Đã tiếp nhận">Đã tiếp nhận</option>
                        <option value="Đã phân tích">Đã phân tích</option>
                        <option value="Đang xử lý">Đang xử lý</option>
                        <option value="Đã xử lý">Đã xử lý</option>
                        <option value="Đã phân công">Đã phân công</option>
                        </select>
                </div>
                 <div class="form-group">
                    <label for="filter-assigned">Lọc phân công:</label>
                    <select id="filter-assigned" onchange="fetchRequests()">
                        <option value="">Tất cả</option>
                        <option value="me">Giao cho tôi</option>
                        <option value="unassigned">Chưa giao</option>
                        </select>
                </div>
                <hr>
                <div id="requests-list">
                    <p>Đang tải danh sách...</p>
                </div>
            </div>
        </div>

        <div class="request-detail-container card" id="request-detail">
             <div class="card-header">
                <h2 id="detail-request-id">Chi tiết yêu cầu</h2>
             </div>
             <div class="card-body" id="detail-content">
                 <p>Chọn một yêu cầu từ danh sách bên trái để xem chi tiết.</p>
             </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Hệ thống quản lý dịch vụ khách hàng. Bảo lưu mọi quyền.</p>
        </div>
    </footer>

    <script src="/static/js/staff.js"></script>
</body>
</html>